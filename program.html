<!-- Tambahkan style untuk countdown -->
<style>
.countdown {
  background: #3E9946;
  color: white;
  padding: 5px 10px;
  border-radius: 15px;
  font-size: 0.9rem;
  margin-top: 10px;
  display: inline-block;
}
</style>

<!-- Ganti script yang ada dengan ini -->
<script>
// Fungsi untuk memuat proker dari localStorage
function loadProker() {
  try {
    const prokers = JSON.parse(localStorage.getItem('prokers')) || [];
    
    // Jika tidak ada data, gunakan data default
    if (prokers.length === 0) {
      displayDefaultProker();
      return;
    }
    
    displayProker(prokers);
  } catch (error) {
    console.error('Error loading proker:', error);
    displayDefaultProker();
  }
}

// Menampilkan proker default jika tidak ada data
function displayDefaultProker() {
  const featuresContainer = document.querySelector('.features');
  featuresContainer.innerHTML = `
    <div class="feature-card">
      <div class="feature-icon"><i class="fas fa-book-open"></i></div>
      <h3>Program Akademik</h3>
      <p>Meningkatkan prestasi siswa melalui kegiatan belajar tambahan dan lomba ilmiah.</p>
    </div>
    <div class="feature-card">
      <div class="feature-icon"><i class="fas fa-futbol"></i></div>
      <h3>Program Olahraga</h3>
      <p>Menumbuhkan semangat sportivitas melalui turnamen futsal, basket, dan lainnya.</p>
    </div>
    <div class="feature-card">
      <div class="feature-icon"><i class="fas fa-music"></i></div>
      <h3>Program Seni</h3>
      <p>Wadah bagi siswa menyalurkan kreativitas di bidang seni musik, tari, dan teater.</p>
    </div>
  `;
}

// Menampilkan proker dengan countdown
function displayProker(prokerList) {
  const featuresContainer = document.querySelector('.features');
  featuresContainer.innerHTML = '';
  
  // Filter hanya proker yang statusnya active
  const activeProkers = prokerList.filter(proker => proker.status === 'active');
  
  if (activeProkers.length === 0) {
    displayDefaultProker();
    return;
  }
  
  activeProkers.forEach(proker => {
    const tanggal = new Date(proker.tanggal);
    const now = new Date();
    const diffTime = tanggal - now;
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    
    let countdownText = '';
    let countdownClass = '';
    
    if (diffDays > 0) {
      countdownText = `${diffDays} hari lagi`;
      countdownClass = 'countdown-upcoming';
    } else if (diffDays === 0) {
      countdownText = 'Hari ini!';
      countdownClass = 'countdown-today';
    } else {
      countdownText = 'Sudah terlaksana';
      countdownClass = 'countdown-past';
    }
    
    const prokerCard = `
      <div class="feature-card">
        <div class="feature-icon"><i class="${proker.icon}"></i></div>
        <h3>${proker.judul}</h3>
        <p>${proker.deskripsi}</p>
        <div class="countdown ${countdownClass}">${countdownText}</div>
      </div>
    `;
    featuresContainer.innerHTML += prokerCard;
  });
}

// Jalankan saat halaman dimuat
document.addEventListener('DOMContentLoaded', loadProker);
</script>
